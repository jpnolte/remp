<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 12 Funktionen wiederholt anwenden | R für empirische Wissenschaften</title>
  <meta name="description" content="Dieses Buch bietet einfache Erklärungen mit praktischen Beispielen und Übungen, welche das Erlernen von R ohne Programmiervorkenntnisse im Selbststudium ermöglichen. Die Zielgruppe sind WissenschaftlerInnen und StudentInnen der Fachrichtungen Medizin, Psychologie, Wirtschaftswissenschaften, Sozialwissenschaften, Agrarwissenschaften, Neurowissenschaften, Biologie, Journalismus, Tourismus, Data Science, Biostatistik und allen weiteren Disziplinen, die Daten auswerten möchten." />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 12 Funktionen wiederholt anwenden | R für empirische Wissenschaften" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/logo.png" />
  <meta property="og:description" content="Dieses Buch bietet einfache Erklärungen mit praktischen Beispielen und Übungen, welche das Erlernen von R ohne Programmiervorkenntnisse im Selbststudium ermöglichen. Die Zielgruppe sind WissenschaftlerInnen und StudentInnen der Fachrichtungen Medizin, Psychologie, Wirtschaftswissenschaften, Sozialwissenschaften, Agrarwissenschaften, Neurowissenschaften, Biologie, Journalismus, Tourismus, Data Science, Biostatistik und allen weiteren Disziplinen, die Daten auswerten möchten." />
  <meta name="github-repo" content="j3ypi/remp" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 12 Funktionen wiederholt anwenden | R für empirische Wissenschaften" />
  
  <meta name="twitter:description" content="Dieses Buch bietet einfache Erklärungen mit praktischen Beispielen und Übungen, welche das Erlernen von R ohne Programmiervorkenntnisse im Selbststudium ermöglichen. Die Zielgruppe sind WissenschaftlerInnen und StudentInnen der Fachrichtungen Medizin, Psychologie, Wirtschaftswissenschaften, Sozialwissenschaften, Agrarwissenschaften, Neurowissenschaften, Biologie, Journalismus, Tourismus, Data Science, Biostatistik und allen weiteren Disziplinen, die Daten auswerten möchten." />
  <meta name="twitter:image" content="/images/logo.png" />

<meta name="author" content="Jan Philipp Nolte" />


<meta name="date" content="2023-03-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="datatypes.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@xiee/utils/js/key-buttons.min.js" defer></script>
<link href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/key-buttons.min.css" rel="stylesheet"></link>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { } /* Alert */
code span.an { } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { } /* ControlFlow */
code span.ch { color: #0e7a0e; } /* Char */
code span.cn { } /* Constant */
code span.co { } /* Comment */
code span.cv { color: #0e7a0e; } /* CommentVar */
code span.do { } /* Documentation */
code span.er { font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fu { color: #e65100; } /* Function */
code span.im { } /* Import */
code span.in { } /* Information */
code span.kw { color: #e65100; } /* Keyword */
code span.op { } /* Operator */
code span.ot { } /* Other */
code span.pp { } /* Preprocessor */
code span.sc { } /* SpecialChar */
code span.ss { } /* SpecialString */
code span.st { color: #0e7a0e; } /* String */
code span.va { } /* Variable */
code span.vs { color: #0e7a0e; } /* VerbatimString */
code span.wa { font-weight: bold; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="toc.css" type="text/css" />
<link rel="stylesheet" href="font-awesome.min.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="https://r-empirische-wissenschaften.de"> R für empirische Wissenschaften</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#lizenz"><i class="fa fa-check"></i>Lizenz</a></li>
</ul></li>
<li class="part"><span><b>I Die ersten Schritte</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Einleitung</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#für-wen-ist-dieses-buch"><i class="fa fa-check"></i><b>1.1</b> Für wen ist dieses Buch?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#aufbau-und-bearbeitungsstrategie"><i class="fa fa-check"></i><b>1.2</b> Aufbau und Bearbeitungsstrategie</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#boxen-übungen-und-datensätze"><i class="fa fa-check"></i><b>1.3</b> Boxen, Übungen und Datensätze</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#books"><i class="fa fa-check"></i><b>1.4</b> Ergänzende Literatur</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="start.html"><a href="start.html"><i class="fa fa-check"></i><b>2</b> Startvoraussetzungen</a>
<ul>
<li class="chapter" data-level="2.1" data-path="start.html"><a href="start.html#installation-von-r-und-rstudio"><i class="fa fa-check"></i><b>2.1</b> Installation von R und RStudio</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="start.html"><a href="start.html#installr"><i class="fa fa-check"></i><b>2.1.1</b> Programmiersprache R</a></li>
<li class="chapter" data-level="2.1.2" data-path="start.html"><a href="start.html#rstudio"><i class="fa fa-check"></i><b>2.1.2</b> Programmierumgebung RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="start.html"><a href="start.html#aufbau"><i class="fa fa-check"></i><b>2.2</b> Aufbau von RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="start.html"><a href="start.html#anpassung"><i class="fa fa-check"></i><b>2.3</b> RStudio anpassen</a></li>
<li class="chapter" data-level="2.4" data-path="start.html"><a href="start.html#funktionen-und-ihre-argumente"><i class="fa fa-check"></i><b>2.4</b> Funktionen und ihre Argumente</a></li>
<li class="chapter" data-level="2.5" data-path="start.html"><a href="start.html#packages"><i class="fa fa-check"></i><b>2.5</b> Packages (Erweiterungen)</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="start.html"><a href="start.html#installieren-und-laden"><i class="fa fa-check"></i><b>2.5.1</b> Installieren und laden</a></li>
<li class="chapter" data-level="2.5.2" data-path="start.html"><a href="start.html#notwendige-packages-für-dieses-buch"><i class="fa fa-check"></i><b>2.5.2</b> Notwendige Packages für dieses Buch</a></li>
<li class="chapter" data-level="2.5.3" data-path="start.html"><a href="start.html#namespace"><i class="fa fa-check"></i><b>2.5.3</b> Namespace</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="start.html"><a href="start.html#help"><i class="fa fa-check"></i><b>2.6</b> Fehler- und Warnmeldungen</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="start.html"><a href="start.html#der-unterschied"><i class="fa fa-check"></i><b>2.6.1</b> Der Unterschied</a></li>
<li class="chapter" data-level="2.6.2" data-path="start.html"><a href="start.html#hilfe"><i class="fa fa-check"></i><b>2.6.2</b> Wo bekomme ich Hilfe?</a></li>
<li class="chapter" data-level="2.6.3" data-path="start.html"><a href="start.html#fehler-beheben"><i class="fa fa-check"></i><b>2.6.3</b> Fehler beheben</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Vorbereitung</b></span></li>
<li class="chapter" data-level="3" data-path="project.html"><a href="project.html"><i class="fa fa-check"></i><b>3</b> R Projekte</a>
<ul>
<li class="chapter" data-level="3.1" data-path="project.html"><a href="project.html#die-probleme-der-pfade"><i class="fa fa-check"></i><b>3.1</b> Die Probleme der Pfade</a></li>
<li class="chapter" data-level="3.2" data-path="project.html"><a href="project.html#projekte-in-rstudio-erstellen"><i class="fa fa-check"></i><b>3.2</b> Projekte in RStudio erstellen</a></li>
<li class="chapter" data-level="3.3" data-path="project.html"><a href="project.html#here"><i class="fa fa-check"></i><b>3.3</b> Der Pfad zum Datensatz</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vars.html"><a href="vars.html"><i class="fa fa-check"></i><b>4</b> Wichtiges Grundlagenwissen</a>
<ul>
<li class="chapter" data-level="4.1" data-path="vars.html"><a href="vars.html#begin"><i class="fa fa-check"></i><b>4.1</b> Schritt für Schritt beginnen</a></li>
<li class="chapter" data-level="4.2" data-path="vars.html"><a href="vars.html#pfeil"><i class="fa fa-check"></i><b>4.2</b> Variablen speichern und verwenden</a></li>
<li class="chapter" data-level="4.3" data-path="vars.html"><a href="vars.html#datentypen"><i class="fa fa-check"></i><b>4.3</b> Datentypen</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="vars.html"><a href="vars.html#zahlen-buchstaben-und-logische-abfragen"><i class="fa fa-check"></i><b>4.3.1</b> Zahlen, Buchstaben und logische Abfragen</a></li>
<li class="chapter" data-level="4.3.2" data-path="vars.html"><a href="vars.html#factor"><i class="fa fa-check"></i><b>4.3.2</b> Faktoren</a></li>
<li class="chapter" data-level="4.3.3" data-path="vars.html"><a href="vars.html#zeitdaten"><i class="fa fa-check"></i><b>4.3.3</b> Zeitdaten</a></li>
<li class="chapter" data-level="4.3.4" data-path="vars.html"><a href="vars.html#datentypen-konvertieren"><i class="fa fa-check"></i><b>4.3.4</b> Datentypen konvertieren</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="vars.html"><a href="vars.html#struktur-von-datensätzen"><i class="fa fa-check"></i><b>4.4</b> Struktur von Datensätzen</a></li>
<li class="chapter" data-level="4.5" data-path="vars.html"><a href="vars.html#dollar"><i class="fa fa-check"></i><b>4.5</b> Der Dollar-Operator</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="io.html"><a href="io.html"><i class="fa fa-check"></i><b>5</b> Datensätze</a>
<ul>
<li class="chapter" data-level="5.1" data-path="io.html"><a href="io.html#import"><i class="fa fa-check"></i><b>5.1</b> Einlesen externer Dateien</a></li>
<li class="chapter" data-level="5.2" data-path="io.html"><a href="io.html#datensätze-aus-packages-laden"><i class="fa fa-check"></i><b>5.2</b> Datensätze aus Packages laden</a></li>
<li class="chapter" data-level="5.3" data-path="io.html"><a href="io.html#inR"><i class="fa fa-check"></i><b>5.3</b> Datensätze in R erstellen</a></li>
<li class="chapter" data-level="5.4" data-path="io.html"><a href="io.html#speichern-und-konvertieren"><i class="fa fa-check"></i><b>5.4</b> Speichern und Konvertieren</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html"><i class="fa fa-check"></i><b>6</b> Datenvorbereitung</a>
<ul>
<li class="chapter" data-level="6.1" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#tidyverse"><i class="fa fa-check"></i><b>6.1</b> Einführung</a></li>
<li class="chapter" data-level="6.2" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#select"><i class="fa fa-check"></i><b>6.2</b> Spalten auswählen, umbenennen und umsortieren</a></li>
<li class="chapter" data-level="6.3" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#filter"><i class="fa fa-check"></i><b>6.3</b> Zeilen auswählen und umsortieren</a></li>
<li class="chapter" data-level="6.4" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#mutate"><i class="fa fa-check"></i><b>6.4</b> Spalten hinzufügen und Spalteninhalte verändern</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#single"><i class="fa fa-check"></i><b>6.4.1</b> Einzelne Spalten</a></li>
<li class="chapter" data-level="6.4.2" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#across"><i class="fa fa-check"></i><b>6.4.2</b> Mehrere Spalten</a></li>
<li class="chapter" data-level="6.4.3" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#helfer"><i class="fa fa-check"></i><b>6.4.3</b> Änderungen unter Bedingungen</a></li>
<li class="chapter" data-level="6.4.4" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#function"><i class="fa fa-check"></i><b>6.4.4</b> Eigene Funktionen erstellen</a></li>
<li class="chapter" data-level="6.4.5" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#zeilenweise-berechnen"><i class="fa fa-check"></i><b>6.4.5</b> Zeilenweise berechnen</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#umgang-mit-fehlenden-werten-und-duplikaten"><i class="fa fa-check"></i><b>6.5</b> Umgang mit fehlenden Werten und Duplikaten</a></li>
<li class="chapter" data-level="6.6" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#tidy"><i class="fa fa-check"></i><b>6.6</b> Breites und langes Datenformat</a></li>
<li class="chapter" data-level="6.7" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#separate"><i class="fa fa-check"></i><b>6.7</b> Spalten trennen</a></li>
<li class="chapter" data-level="6.8" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#datensätze-zusammenführen"><i class="fa fa-check"></i><b>6.8</b> Datensätze zusammenführen</a></li>
<li class="chapter" data-level="6.9" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#datastring"><i class="fa fa-check"></i><b>6.9</b> Buchstaben und Wörter bearbeiten</a></li>
<li class="chapter" data-level="6.10" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#datafactor"><i class="fa fa-check"></i><b>6.10</b> Faktoren verändern</a></li>
<li class="chapter" data-level="6.11" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#datazeit"><i class="fa fa-check"></i><b>6.11</b> Mit Zeitdaten arbeiten</a></li>
<li class="chapter" data-level="6.12" data-path="datenvorbereitung.html"><a href="datenvorbereitung.html#binäre-antwortmatrix-erstellen"><i class="fa fa-check"></i><b>6.12</b> Binäre Antwortmatrix erstellen</a></li>
</ul></li>
<li class="part"><span><b>III Auswertung</b></span></li>
<li class="chapter" data-level="7" data-path="descr.html"><a href="descr.html"><i class="fa fa-check"></i><b>7</b> Deskriptive Statistik</a>
<ul>
<li class="chapter" data-level="7.1" data-path="descr.html"><a href="descr.html#lagestreu"><i class="fa fa-check"></i><b>7.1</b> Lagemaße und Streuungsmaße</a></li>
<li class="chapter" data-level="7.2" data-path="descr.html"><a href="descr.html#contigency"><i class="fa fa-check"></i><b>7.2</b> Häufigkeiten und Kontingenztafeln</a></li>
<li class="chapter" data-level="7.3" data-path="descr.html"><a href="descr.html#zusammenhangsmaße"><i class="fa fa-check"></i><b>7.3</b> Zusammenhangsmaße</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="visual.html"><a href="visual.html"><i class="fa fa-check"></i><b>8</b> Visualisierungen</a>
<ul>
<li class="chapter" data-level="8.1" data-path="visual.html"><a href="visual.html#einführung"><i class="fa fa-check"></i><b>8.1</b> Einführung</a></li>
<li class="chapter" data-level="8.2" data-path="visual.html"><a href="visual.html#histogram"><i class="fa fa-check"></i><b>8.2</b> Histogramm und Dichte</a></li>
<li class="chapter" data-level="8.3" data-path="visual.html"><a href="visual.html#scatter"><i class="fa fa-check"></i><b>8.3</b> Streudiagramm</a></li>
<li class="chapter" data-level="8.4" data-path="visual.html"><a href="visual.html#boxplot"><i class="fa fa-check"></i><b>8.4</b> Boxplot</a></li>
<li class="chapter" data-level="8.5" data-path="visual.html"><a href="visual.html#violin"><i class="fa fa-check"></i><b>8.5</b> Violin Plot</a></li>
<li class="chapter" data-level="8.6" data-path="visual.html"><a href="visual.html#barplot"><i class="fa fa-check"></i><b>8.6</b> Balkendiagramm</a></li>
<li class="chapter" data-level="8.7" data-path="visual.html"><a href="visual.html#anovaplot"><i class="fa fa-check"></i><b>8.7</b> Liniendiagramm</a></li>
<li class="chapter" data-level="8.8" data-path="visual.html"><a href="visual.html#qqplot"><i class="fa fa-check"></i><b>8.8</b> Quantil-Quantil Plot</a></li>
<li class="chapter" data-level="8.9" data-path="visual.html"><a href="visual.html#morefactors"><i class="fa fa-check"></i><b>8.9</b> Mehrfaktorielle Abbildungen</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="visual.html"><a href="visual.html#groups"><i class="fa fa-check"></i><b>8.9.1</b> Gruppierungsargumente</a></li>
<li class="chapter" data-level="8.9.2" data-path="visual.html"><a href="visual.html#facets"><i class="fa fa-check"></i><b>8.9.2</b> Facetten als weitere Dimensionen</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="visual.html"><a href="visual.html#adapt"><i class="fa fa-check"></i><b>8.10</b> Anpassen des Aussehens</a>
<ul>
<li class="chapter" data-level="8.10.1" data-path="visual.html"><a href="visual.html#color"><i class="fa fa-check"></i><b>8.10.1</b> Farben</a></li>
<li class="chapter" data-level="8.10.2" data-path="visual.html"><a href="visual.html#themeaxis"><i class="fa fa-check"></i><b>8.10.2</b> Themen und Achsen</a></li>
<li class="chapter" data-level="8.10.3" data-path="visual.html"><a href="visual.html#legende-und-facetten"><i class="fa fa-check"></i><b>8.10.3</b> Legende und Facetten</a></li>
</ul></li>
<li class="chapter" data-level="8.11" data-path="visual.html"><a href="visual.html#patch"><i class="fa fa-check"></i><b>8.11</b> Anordnen mehrerer Graphen</a></li>
<li class="chapter" data-level="8.12" data-path="visual.html"><a href="visual.html#ggsave"><i class="fa fa-check"></i><b>8.12</b> Speichern von Abbildungen</a></li>
<li class="chapter" data-level="8.13" data-path="visual.html"><a href="visual.html#exemplarische-erweiterungen"><i class="fa fa-check"></i><b>8.13</b> Exemplarische Erweiterungen</a>
<ul>
<li class="chapter" data-level="8.13.1" data-path="visual.html"><a href="visual.html#kaplan"><i class="fa fa-check"></i><b>8.13.1</b> Kaplan-Meier-Kurve</a></li>
<li class="chapter" data-level="8.13.2" data-path="visual.html"><a href="visual.html#residuen-überprüfen"><i class="fa fa-check"></i><b>8.13.2</b> Residuen überprüfen</a></li>
<li class="chapter" data-level="8.13.3" data-path="visual.html"><a href="visual.html#ridgeline-plot"><i class="fa fa-check"></i><b>8.13.3</b> Ridgeline Plot</a></li>
<li class="chapter" data-level="8.13.4" data-path="visual.html"><a href="visual.html#hervorheben-bestimmter-werte"><i class="fa fa-check"></i><b>8.13.4</b> Hervorheben bestimmter Werte</a></li>
<li class="chapter" data-level="8.13.5" data-path="visual.html"><a href="visual.html#dags"><i class="fa fa-check"></i><b>8.13.5</b> Directed Acyclic Graphs</a></li>
</ul></li>
<li class="chapter" data-level="8.14" data-path="visual.html"><a href="visual.html#example"><i class="fa fa-check"></i><b>8.14</b> Anwendungsbeispiel</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="inductive.html"><a href="inductive.html"><i class="fa fa-check"></i><b>9</b> Inferenzstatistik</a>
<ul>
<li class="chapter" data-level="9.1" data-path="inductive.html"><a href="inductive.html#einführung-1"><i class="fa fa-check"></i><b>9.1</b> Einführung</a></li>
<li class="chapter" data-level="9.2" data-path="inductive.html"><a href="inductive.html#ein--und-zweistichprobenszenarien"><i class="fa fa-check"></i><b>9.2</b> Ein- und Zweistichprobenszenarien</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="inductive.html"><a href="inductive.html#t-test-und-welch-test"><i class="fa fa-check"></i><b>9.2.1</b> <em>t</em> Test und Welch Test</a></li>
<li class="chapter" data-level="9.2.2" data-path="inductive.html"><a href="inductive.html#wilcoxon-test"><i class="fa fa-check"></i><b>9.2.2</b> Wilcoxon Test</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="inductive.html"><a href="inductive.html#unterschiede-mehrerer-gruppen"><i class="fa fa-check"></i><b>9.3</b> Unterschiede mehrerer Gruppen</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="inductive.html"><a href="inductive.html#aov"><i class="fa fa-check"></i><b>9.3.1</b> Varianz- und Kovarianzanalyse</a></li>
<li class="chapter" data-level="9.3.2" data-path="inductive.html"><a href="inductive.html#repeated"><i class="fa fa-check"></i><b>9.3.2</b> Varianzanalyse mit Messwiederholung</a></li>
<li class="chapter" data-level="9.3.3" data-path="inductive.html"><a href="inductive.html#kruskal-wallis-test"><i class="fa fa-check"></i><b>9.3.3</b> Kruskal-Wallis Test</a></li>
<li class="chapter" data-level="9.3.4" data-path="inductive.html"><a href="inductive.html#friedman-test"><i class="fa fa-check"></i><b>9.3.4</b> Friedman Test</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="inductive.html"><a href="inductive.html#korrelationskoeffizienten"><i class="fa fa-check"></i><b>9.4</b> Korrelationskoeffizienten</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="inductive.html"><a href="inductive.html#produkt-moment-korrelation-nach-pearson"><i class="fa fa-check"></i><b>9.4.1</b> Produkt-Moment Korrelation nach Pearson</a></li>
<li class="chapter" data-level="9.4.2" data-path="inductive.html"><a href="inductive.html#rangkorrelation-nach-spearman"><i class="fa fa-check"></i><b>9.4.2</b> Rangkorrelation nach Spearman</a></li>
<li class="chapter" data-level="9.4.3" data-path="inductive.html"><a href="inductive.html#kendall-tau-korrelation"><i class="fa fa-check"></i><b>9.4.3</b> Kendall-Tau Korrelation</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="inductive.html"><a href="inductive.html#regressionsmodelle"><i class="fa fa-check"></i><b>9.5</b> Regressionsmodelle</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="inductive.html"><a href="inductive.html#linregression"><i class="fa fa-check"></i><b>9.5.1</b> Lineare Regression</a></li>
<li class="chapter" data-level="9.5.2" data-path="inductive.html"><a href="inductive.html#mixedregression"><i class="fa fa-check"></i><b>9.5.2</b> Lineare gemischte Regression</a></li>
<li class="chapter" data-level="9.5.3" data-path="inductive.html"><a href="inductive.html#logistische-regression"><i class="fa fa-check"></i><b>9.5.3</b> Logistische Regression</a></li>
<li class="chapter" data-level="9.5.4" data-path="inductive.html"><a href="inductive.html#multinomiales-logit-modell"><i class="fa fa-check"></i><b>9.5.4</b> Multinomiales Logit Modell</a></li>
<li class="chapter" data-level="9.5.5" data-path="inductive.html"><a href="inductive.html#kumulatives-logit-modell"><i class="fa fa-check"></i><b>9.5.5</b> Kumulatives Logit Modell</a></li>
<li class="chapter" data-level="9.5.6" data-path="inductive.html"><a href="inductive.html#poisson-regression"><i class="fa fa-check"></i><b>9.5.6</b> Poisson Regression</a></li>
<li class="chapter" data-level="9.5.7" data-path="inductive.html"><a href="inductive.html#negative-binomial-regression"><i class="fa fa-check"></i><b>9.5.7</b> Negative Binomial Regression</a></li>
<li class="chapter" data-level="9.5.8" data-path="inductive.html"><a href="inductive.html#cox"><i class="fa fa-check"></i><b>9.5.8</b> Cox Regression</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="inductive.html"><a href="inductive.html#contingency"><i class="fa fa-check"></i><b>9.6</b> Kontingenztafeln</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="inductive.html"><a href="inductive.html#fisher"><i class="fa fa-check"></i><b>9.6.1</b> Exakter Fisher-Test</a></li>
<li class="chapter" data-level="9.6.2" data-path="inductive.html"><a href="inductive.html#chi-quadrat-tests"><i class="fa fa-check"></i><b>9.6.2</b> Chi Quadrat Tests</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="inductive.html"><a href="inductive.html#voraussetzungen-überprüfen"><i class="fa fa-check"></i><b>9.7</b> Voraussetzungen überprüfen</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="inductive.html"><a href="inductive.html#normalverteilung-der-residuen"><i class="fa fa-check"></i><b>9.7.1</b> Normalverteilung der Residuen</a></li>
<li class="chapter" data-level="9.7.2" data-path="inductive.html"><a href="inductive.html#varianzhomogenität"><i class="fa fa-check"></i><b>9.7.2</b> Varianzhomogenität</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="inductive.html"><a href="inductive.html#broom"><i class="fa fa-check"></i><b>9.8</b> Ergebnisse formatieren</a></li>
</ul></li>
<li class="part"><span><b>IV Vertiefung</b></span></li>
<li class="chapter" data-level="10" data-path="ergebnisse-exportieren.html"><a href="ergebnisse-exportieren.html"><i class="fa fa-check"></i><b>10</b> Ergebnisse exportieren</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ergebnisse-exportieren.html"><a href="ergebnisse-exportieren.html#intromarkdown"><i class="fa fa-check"></i><b>10.1</b> Wichtige Begriffe</a></li>
<li class="chapter" data-level="10.2" data-path="ergebnisse-exportieren.html"><a href="ergebnisse-exportieren.html#markdown"><i class="fa fa-check"></i><b>10.2</b> Berichte erstellen</a></li>
<li class="chapter" data-level="10.3" data-path="ergebnisse-exportieren.html"><a href="ergebnisse-exportieren.html#tabellen-umwandeln"><i class="fa fa-check"></i><b>10.3</b> Tabellen umwandeln</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="ergebnisse-exportieren.html"><a href="ergebnisse-exportieren.html#knitr"><i class="fa fa-check"></i><b>10.3.1</b> Exportieren nach Word und PDF</a></li>
<li class="chapter" data-level="10.3.2" data-path="ergebnisse-exportieren.html"><a href="ergebnisse-exportieren.html#latex"><i class="fa fa-check"></i><b>10.3.2</b> Exportieren nach LaTeX</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="ergebnisse-exportieren.html"><a href="ergebnisse-exportieren.html#quarto"><i class="fa fa-check"></i><b>10.4</b> Alternative mit Quarto</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="datatypes.html"><a href="datatypes.html"><i class="fa fa-check"></i><b>11</b> Datenstrukturen</a>
<ul>
<li class="chapter" data-level="11.1" data-path="datatypes.html"><a href="datatypes.html#vec"><i class="fa fa-check"></i><b>11.1</b> Vektor</a></li>
<li class="chapter" data-level="11.2" data-path="datatypes.html"><a href="datatypes.html#matrix"><i class="fa fa-check"></i><b>11.2</b> Matrix</a></li>
<li class="chapter" data-level="11.3" data-path="datatypes.html"><a href="datatypes.html#tibble"><i class="fa fa-check"></i><b>11.3</b> Data.frame und tibble</a></li>
<li class="chapter" data-level="11.4" data-path="datatypes.html"><a href="datatypes.html#lists"><i class="fa fa-check"></i><b>11.4</b> Liste</a></li>
<li class="chapter" data-level="11.5" data-path="datatypes.html"><a href="datatypes.html#umwandlung"><i class="fa fa-check"></i><b>11.5</b> Umwandlungen</a></li>
<li class="chapter" data-level="11.6" data-path="datatypes.html"><a href="datatypes.html#objektorientierung"><i class="fa fa-check"></i><b>11.6</b> Objektorientierung</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="iterationmain.html"><a href="iterationmain.html"><i class="fa fa-check"></i><b>12</b> Funktionen wiederholt anwenden</a>
<ul>
<li class="chapter" data-level="12.1" data-path="iterationmain.html"><a href="iterationmain.html#iteration"><i class="fa fa-check"></i><b>12.1</b> Das Copy &amp; Paste Problem</a></li>
<li class="chapter" data-level="12.2" data-path="iterationmain.html"><a href="iterationmain.html#map"><i class="fa fa-check"></i><b>12.2</b> Listenbasierte Berechnungen</a></li>
<li class="chapter" data-level="12.3" data-path="iterationmain.html"><a href="iterationmain.html#for"><i class="fa fa-check"></i><b>12.3</b> for-Schleifen</a></li>
<li class="chapter" data-level="12.4" data-path="iterationmain.html"><a href="iterationmain.html#nest"><i class="fa fa-check"></i><b>12.4</b> Einnisten</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a>
<ul>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#datensatzerläuterungen"><i class="fa fa-check"></i>Datensatzerläuterungen</a>
<ul>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#big-five"><i class="fa fa-check"></i>Big Five</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#weitere-datensätze"><i class="fa fa-check"></i>Weitere Datensätze</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#literaturverzeichnis"><i class="fa fa-check"></i>Literaturverzeichnis</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#verwendete-softwareversionen"><i class="fa fa-check"></i>Verwendete Softwareversionen</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R für empirische Wissenschaften</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="iterationmain" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Kapitel 12</span> Funktionen wiederholt anwenden<a href="iterationmain.html#iterationmain" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p>Im Zuge der Datenanalyse muss man häufig dieselben Berechnungen für mehrere Szenarien vornehmen. Um sich Zeit zu sparen und die Häufigkeit von Fehlern zu minimieren, existieren in jeder Programmiersprache sogenannte Schleifen. In diesem Kapitel lernst du drei verschiedene Arten kennen, diese sogenannten iterativen Prozesse selbst in R umzusetzen.</p>
</blockquote>
<div id="iteration" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Das Copy &amp; Paste Problem<a href="iterationmain.html#iteration" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In diesem Kapitel ist das Installieren und Laden des <code>purrr</code> Packages aus dem <code>tidyverse</code> eine Voraussetzung.</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb606-1"><a href="iterationmain.html#cb606-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>In vielen Szenarien ist es nötig, die Funktion nicht nur einmal, sondern mehrmals anzuwenden. Die naheliegende Lösung dafür ist den Funktionsaufruf zu kopieren und leicht modifiziert für den nächsten Anwendungsfall zu verwenden. Ein Beispiel dafür haben wir bereits in Kapitel <a href="inductive.html#contingency">9.6</a> beim Ausgeben der Häufigkeiten kategorialer Variablen gesehen. Wenn ein oder zwei Häufigkeiten ausgegeben werden sollen, ist das Kopieren der Funktion noch kein Problem.</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb607-1"><a href="iterationmain.html#cb607-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(big5_mod<span class="sc">$</span>Geschlecht)</span></code></pre></div>
<pre class="bordercode"><code>
  f   m 
118  82 </code></pre>
<div class="sourceCode" id="cb609"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb609-1"><a href="iterationmain.html#cb609-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(big5_mod<span class="sc">$</span>Gruppe)</span></code></pre></div>
<pre class="bordercode"><code>
  Jung Mittel  Weise 
   147     39     14 </code></pre>
<p>Falls jedoch die Häufigkeiten von 20 bis 30 Variablen gewünscht sind, ist das Kopieren der jeweiligen Funktion nicht nur zeitaufwendig, sondern auch fehleranfällig. Im Verlauf der nächsten Kapitel werden wir drei mögliche Automatisierungen kennenlernen: <code>map()</code>, for-Schleifen und Einnisten.</p>
<p>Mit der Funktion <code>map()</code> können wir die Funktion <code>table()</code> zur Berechnung der Häufigkeiten auf jede ausgewählte Spalte anwenden. Es werden also zuerst die Häufigkeiten der Geschlechter und anschließend die der Altersgruppen berechnet.</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb611-1"><a href="iterationmain.html#cb611-1" aria-hidden="true" tabindex="-1"></a>big5_mod <span class="sc">|&gt;</span></span>
<span id="cb611-2"><a href="iterationmain.html#cb611-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Geschlecht, Gruppe) <span class="sc">|&gt;</span></span>
<span id="cb611-3"><a href="iterationmain.html#cb611-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(table)</span></code></pre></div>
<pre class="bordercode"><code>$Geschlecht

  f   m 
118  82 

$Gruppe

  Jung Mittel  Weise 
   147     39     14 </code></pre>
<p>Durch einen weiteren Aufruf von <code>map()</code> dieses Mal mit der Funktion <code>prop.table()</code> können zusätzlich die Verhältnisse der Merkmale ausgegeben werden.</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb613-1"><a href="iterationmain.html#cb613-1" aria-hidden="true" tabindex="-1"></a>big5_mod <span class="sc">|&gt;</span></span>
<span id="cb613-2"><a href="iterationmain.html#cb613-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Geschlecht, Gruppe) <span class="sc">|&gt;</span></span>
<span id="cb613-3"><a href="iterationmain.html#cb613-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(table) <span class="sc">|&gt;</span></span>
<span id="cb613-4"><a href="iterationmain.html#cb613-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(prop.table)</span></code></pre></div>
<pre class="bordercode"><code>$Geschlecht

   f    m 
0.59 0.41 

$Gruppe

  Jung Mittel  Weise 
 0.735  0.195  0.070 </code></pre>
<p>Da Häufigkeiten in der Regel nur bei kategorialen Variablen erwünscht sind, könnten wir auch nur Spalten vom Datentyp Character oder Factor ausrechnen lassen (siehe Kapitel <a href="datenvorbereitung.html#select">6.2</a>).</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb615-1"><a href="iterationmain.html#cb615-1" aria-hidden="true" tabindex="-1"></a>big5_mod <span class="sc">|&gt;</span></span>
<span id="cb615-2"><a href="iterationmain.html#cb615-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.character) <span class="sc">|</span> <span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span></span>
<span id="cb615-3"><a href="iterationmain.html#cb615-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(table)</span></code></pre></div>
<div class="idea">
<p>Copy &amp; Paste ist fehleranfällig und sollte nur bei weniger als zehn wiederholten Anwendungen von Funktionen verwendet werden. Alternativ können diese Funktionswiederholungen auf verschiedene Arten automatisiert werden.</p>
</div>
</div>
<div id="map" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Listenbasierte Berechnungen<a href="iterationmain.html#map" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Für dieses Kapitel muss das <code>purrr</code> Package aus dem <code>tidyverse</code> installiert und geladen werden.</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb616-1"><a href="iterationmain.html#cb616-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Ein Beispiel zum wiederholten Anwenden einer Funktion mithilfe von <code>map()</code> wurde bereits im vorherigen Kapitel eingeführt. Während dort die Funktion auf einen <code>tibble</code> angewandt wurde (eine Sonderform der Liste), werden wir uns hier den klassischen Anwendungsfall von <code>map()</code> im Kontext von Listen anschauen.</p>
<p>Als Beispiel wollen wir an dieser Stelle ein lineares Regressionsmodell zur Erklärung der Variation von Extraversion durch Geschlecht für jede Altersgruppe einzeln berechnen (siehe Kapitel <a href="inductive.html#linregression">9.5.1</a>). Dafür trennen wir den Datensatz zunächst mithilfe der Funktion <code>split()</code> in eine Liste mit drei Elementen. Das erste Element enthält einen Datensatz mit den jüngsten Personen, das zweite die mittlere Altersklasse und das dritte Element die Ältesten.</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb617-1"><a href="iterationmain.html#cb617-1" aria-hidden="true" tabindex="-1"></a>mod_ls <span class="ot">&lt;-</span> <span class="fu">split</span>(big5_mod, <span class="sc">~</span> Gruppe)</span></code></pre></div>
<p>Zum Erstellen der Regressionsmodelle kopieren wir den Befehl dreimalig. Dabei wird jedes Mal mithilfe der doppelten eckigen Klammern auf ein anderes Listenelement zugegriffen (siehe Kapitel <a href="datatypes.html#lists">11.4</a>).</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb618-1"><a href="iterationmain.html#cb618-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> mod_ls[[<span class="dv">1</span>]])</span>
<span id="cb618-2"><a href="iterationmain.html#cb618-2" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> mod_ls[[<span class="dv">2</span>]])</span>
<span id="cb618-3"><a href="iterationmain.html#cb618-3" aria-hidden="true" tabindex="-1"></a>model3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> mod_ls[[<span class="dv">3</span>]])</span></code></pre></div>
<p>Mit der Funktion <code>map()</code> kann das redundante Kopieren der Funktion vermieden werden. Als einziges Argument wird das Regressionsmodell als anonyme Lambdafunktion übergeben (siehe Kapitel <a href="datenvorbereitung.html#function">6.4.4</a>). Als Ergebnis erhalten wir eine Liste mit einem Modell pro Listenelement.</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb619-1"><a href="iterationmain.html#cb619-1" aria-hidden="true" tabindex="-1"></a>mod_ls <span class="sc">|&gt;</span> </span>
<span id="cb619-2"><a href="iterationmain.html#cb619-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(\(teildaten) <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> teildaten)) </span></code></pre></div>
<pre class="bordercode"><code>$Jung

Call:
lm(formula = Extraversion ~ Geschlecht, data = teildaten)

Coefficients:
(Intercept)  Geschlechtm  
      3.067        0.055  


$Mittel

Call:
lm(formula = Extraversion ~ Geschlecht, data = teildaten)

Coefficients:
(Intercept)  Geschlechtm  
    3.07000      0.05632  


$Weise

Call:
lm(formula = Extraversion ~ Geschlecht, data = teildaten)

Coefficients:
(Intercept)  Geschlechtm  
     2.8333       0.1267  </code></pre>
<p>Mit einem weiteren Aufruf von <code>map()</code> können wir für jedes der drei Modelle die Zusammenfassungen der Ergebnisse zeigen.</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb621-1"><a href="iterationmain.html#cb621-1" aria-hidden="true" tabindex="-1"></a>mod_ls <span class="sc">|&gt;</span> </span>
<span id="cb621-2"><a href="iterationmain.html#cb621-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(\(teildaten) <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> teildaten)) <span class="sc">|&gt;</span></span>
<span id="cb621-3"><a href="iterationmain.html#cb621-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(summary)</span></code></pre></div>
<p>Alternativ könnte auch die <code>tidy()</code> Funktion zum Ausgeben als <code>tibble</code> (anstelle einer Liste) verwendet werden (siehe Kapitel <a href="inductive.html#broom">9.8</a>). Da die gewünschte Ausgabe hier ein <code>tibble</code> bzw. <code>data.frame</code> (kurz: df) ist, müssen wir stattdessen die Funktion <code>map_df()</code> benutzen.</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb622-1"><a href="iterationmain.html#cb622-1" aria-hidden="true" tabindex="-1"></a>mod_ls <span class="sc">|&gt;</span> </span>
<span id="cb622-2"><a href="iterationmain.html#cb622-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(\(teildaten) <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> teildaten)) <span class="sc">|&gt;</span> </span>
<span id="cb622-3"><a href="iterationmain.html#cb622-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(tidy)</span></code></pre></div>
<pre class="bordercode"><code># A tibble: 6 × 5
  term        estimate std.error statistic   p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)   3.07      0.0376    81.6   4.49e-123
2 Geschlechtm   0.0550    0.0598     0.919 3.60e-  1
3 (Intercept)   3.07      0.0649    47.3   1.08e- 34
4 Geschlechtm   0.0563    0.0930     0.605 5.49e-  1
# … with 2 more rows</code></pre>
<p>Wenn die Ausgabe nicht als Liste erfolgen soll, verändert sich der Funktionsname je nach gewünschter Datenstruktur und gewünschtem Datentyp in andere Varianten von <code>map()</code> (z.B. <code>map_chr()</code> für Character Vektoren oder <code>map_dbl()</code> für numerische Vektoren). Alternativ sind Funktionen mit ähnlicher Funktionsweise direkt in R integriert, die allerdings mitunter umständlicher zu verwenden sind (z.B. <code>lapply()</code>, <code>apply()</code>, <code>tapply()</code> und <code>mapply()</code>). Innerhalb der hier vorgestellten Funktionen werden sogenannte Schleifen verwendet.</p>
</div>
<div id="for" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> for-Schleifen<a href="iterationmain.html#for" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Eine wiederholte Anwendung von Funktionen für jeden Kontext unabhängig der Datenstruktur und des Datentyps wird durch for-Schleifen ermöglicht. Um das Konzept einzuführen, greifen wir an dieser Stelle auf dieselbe listenbasierte Berechnung mehrerer linearer Regressionmodelle des vorherigen Kapitels zurück. Zuerst wird also erneut der Datensatz als Liste aufgeteilt.</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb624-1"><a href="iterationmain.html#cb624-1" aria-hidden="true" tabindex="-1"></a>mod_ls <span class="ot">&lt;-</span> <span class="fu">split</span>(big5_mod, <span class="sc">~</span> Gruppe)</span></code></pre></div>
<p>Mit Copy &amp; Paste müsste das Modell dreimalig ausgeschrieben werden.</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb625-1"><a href="iterationmain.html#cb625-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> mod_ls[[<span class="dv">1</span>]])</span>
<span id="cb625-2"><a href="iterationmain.html#cb625-2" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> mod_ls[[<span class="dv">2</span>]])</span>
<span id="cb625-3"><a href="iterationmain.html#cb625-3" aria-hidden="true" tabindex="-1"></a>model3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> mod_ls[[<span class="dv">3</span>]])</span></code></pre></div>
<p>Den ersten Schritt beim Berechnen einer for-Schleife stellt das Kreieren einer leeren Ergebnisliste dar.</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb626-1"><a href="iterationmain.html#cb626-1" aria-hidden="true" tabindex="-1"></a>erg_ls <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="dv">3</span>)</span>
<span id="cb626-2"><a href="iterationmain.html#cb626-2" aria-hidden="true" tabindex="-1"></a>erg_ls</span></code></pre></div>
<pre class="bordercode"><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL</code></pre>
<p>Falls das Ergebnis für andere Kontexte nicht als Liste, sondern bspw. als numerischer Vektor gespeichert werden soll, könnte man stattdessen <code>vector("numeric", 3)</code> wählen. In der eigentlichen Schleife soll <strong>für</strong> jedes <code>i</code> von <code>1</code> bis <code>3</code> das Modell aufgestellt und in <code>erg_ls</code> an entsprechender Stelle gespeichert werden. Dabei greifen wir auf den jeweiligen Datensatz an der Stelle von Index <code>i</code> aufgrund der Liste innerhalb einer doppelten eckigen Klammer zu.</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb628-1"><a href="iterationmain.html#cb628-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb628-2"><a href="iterationmain.html#cb628-2" aria-hidden="true" tabindex="-1"></a>  erg_ls[[i]] <span class="ot">&lt;-</span> <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> mod_ls[[i]])</span>
<span id="cb628-3"><a href="iterationmain.html#cb628-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb628-4"><a href="iterationmain.html#cb628-4" aria-hidden="true" tabindex="-1"></a>erg_ls</span></code></pre></div>
<pre class="bordercode"><code>[[1]]

Call:
lm(formula = Extraversion ~ Geschlecht, data = mod_ls[[i]])

Coefficients:
(Intercept)  Geschlechtm  
      3.067        0.055  


[[2]]

Call:
lm(formula = Extraversion ~ Geschlecht, data = mod_ls[[i]])

Coefficients:
(Intercept)  Geschlechtm  
    3.07000      0.05632  


[[3]]

Call:
lm(formula = Extraversion ~ Geschlecht, data = mod_ls[[i]])

Coefficients:
(Intercept)  Geschlechtm  
     2.8333       0.1267  </code></pre>
<p>Eine sinnvolle Herangehensweise beim Erstellen von for-Schleifen ist es, den zu wiederholenden Funktionsaufruf zwei- bis dreimal zu kopieren, weil so die Automatisierung leichter fällt. In unserem Beispiel konnten wir so sehen, dass sich nur <code>mod_ls[[1]]</code> zu <code>mod_ls[[2]]</code> und <code>mod_ls[[3]]</code> verändert.</p>
<div class="idea">
<p>Effiziente Schleifen zu schreiben ist nicht einfach. Daher sollte nach Möglichkeit auf die <code>map()</code> Funktionen aus dem <code>purrr</code> Package zurückgegriffen werden. Dies macht sich vor allem bei großen Datensätzen bemerkbar (siehe Kapitel <a href="iterationmain.html#map">12.2</a>).</p>
</div>
</div>
<div id="nest" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Einnisten<a href="iterationmain.html#nest" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Zum Bearbeiten dieses Kapitels muss das <code>tidyr</code> Package aus dem <code>tidyverse</code> geladen werden.</p>
<div class="sourceCode" id="cb630"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb630-1"><a href="iterationmain.html#cb630-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Durch die Funktion <code>nest()</code> können innerhalb von Zellen eines <code>tibbles</code> Datenstrukturen jeder Art verschachtelt werden. Dies wurde bereits in Kapitel <a href="datatypes.html#lists">11.4</a> anhand eines einfachen Beispiels eingeführt. Dieses Konzept wenden wir beim <code>big5_mod</code> Datensatz an und gruppieren dafür innerhalb von <code>nest()</code> mithilfe des Arguments <code>.by</code>.</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb631-1"><a href="iterationmain.html#cb631-1" aria-hidden="true" tabindex="-1"></a>big5_mod <span class="sc">|&gt;</span>  </span>
<span id="cb631-2"><a href="iterationmain.html#cb631-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">.by =</span> Gruppe)</span></code></pre></div>
<pre class="bordercode"><code># A tibble: 3 × 2
  Gruppe data              
  &lt;fct&gt;  &lt;list&gt;            
1 Mittel &lt;tibble [39 × 5]&gt; 
2 Jung   &lt;tibble [147 × 5]&gt;
3 Weise  &lt;tibble [14 × 5]&gt; </code></pre>
<p>Als Ergebnis erhalten wir einen <code>tibble</code>, welcher in der ersten Spalte die Altersgruppen abbildet. Daneben steht eine neue zweite Spalte namens <code>data</code>, in der wiederum drei <code>tibbles</code> mit den Dimensionen <code>39x5</code>, <code>147x5</code> und <code>14x5</code> gespeichert sind.</p>
<p>Ähnlich wie bei den listenbasierten Berechnungen in Kapitel <a href="iterationmain.html#map">12.2</a> können wir auch auf diese verschachtelten <code>tibbles</code> die <code>map()</code> Funktionen anwenden. Der Unterschied besteht darin, dass wir den Befehl innerhalb von <code>mutate()</code> ausführen müssen (siehe Kapitel <a href="datenvorbereitung.html#mutate">6.4</a>). Schließlich soll mit den Inhalten einer Spalte eines <code>tibbles</code> eine neue Spalte erstellt werden. Im zweiten Schritt nehmen wir die Modelle und geben diese in einem aufgeräumten Format mit der Funktion <code>tidy()</code> aus (siehe Kapitel <a href="inductive.html#broom">9.8</a>).</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb633-1"><a href="iterationmain.html#cb633-1" aria-hidden="true" tabindex="-1"></a>big5_mod <span class="sc">|&gt;</span>  </span>
<span id="cb633-2"><a href="iterationmain.html#cb633-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">.by =</span> Gruppe) <span class="sc">|&gt;</span> </span>
<span id="cb633-3"><a href="iterationmain.html#cb633-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb633-4"><a href="iterationmain.html#cb633-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Modelle =</span> <span class="fu">map</span>(data, \(teildaten) <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> teildaten)),</span>
<span id="cb633-5"><a href="iterationmain.html#cb633-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ergebnisse =</span> <span class="fu">map</span>(Modelle, tidy)</span>
<span id="cb633-6"><a href="iterationmain.html#cb633-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre class="bordercode"><code># A tibble: 3 × 4
  Gruppe data               Modelle Ergebnisse      
  &lt;fct&gt;  &lt;list&gt;             &lt;list&gt;  &lt;list&gt;          
1 Mittel &lt;tibble [39 × 5]&gt;  &lt;lm&gt;    &lt;tibble [2 × 5]&gt;
2 Jung   &lt;tibble [147 × 5]&gt; &lt;lm&gt;    &lt;tibble [2 × 5]&gt;
3 Weise  &lt;tibble [14 × 5]&gt;  &lt;lm&gt;    &lt;tibble [2 × 5]&gt;</code></pre>
<p>Die neue Spalte namens <code>Modelle</code> hat Einträge des Datentyps <code>&lt;lm&gt;</code> (die linearen Modelle). Daneben sind die Ergebnisse von <code>tidy()</code> verschachtelt (u.a. mit Teststatistiken und <em>p</em>-Werten). Damit wir an diese Ergebnisse herankommen, müssen wir diese abschließend mit der Funktion <code>unnest()</code> aus der eingenisteten Struktur herausholen.</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r bordercode"><code class="sourceCode r"><span id="cb635-1"><a href="iterationmain.html#cb635-1" aria-hidden="true" tabindex="-1"></a>big5_mod <span class="sc">|&gt;</span>  </span>
<span id="cb635-2"><a href="iterationmain.html#cb635-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">.by =</span> Gruppe) <span class="sc">|&gt;</span> </span>
<span id="cb635-3"><a href="iterationmain.html#cb635-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb635-4"><a href="iterationmain.html#cb635-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Modelle =</span> <span class="fu">map</span>(data, \(teildaten) <span class="fu">lm</span>(Extraversion <span class="sc">~</span> Geschlecht, <span class="at">data =</span> teildaten)),</span>
<span id="cb635-5"><a href="iterationmain.html#cb635-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ergebnisse =</span> <span class="fu">map</span>(Modelle, tidy)</span>
<span id="cb635-6"><a href="iterationmain.html#cb635-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb635-7"><a href="iterationmain.html#cb635-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(Ergebnisse) </span></code></pre></div>
<pre class="bordercode"><code># A tibble: 6 × 8
  Gruppe data               Modelle term        estimate std.error statistic   p.value
  &lt;fct&gt;  &lt;list&gt;             &lt;list&gt;  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 Mittel &lt;tibble [39 × 5]&gt;  &lt;lm&gt;    (Intercept)   3.07      0.0649    47.3   1.08e- 34
2 Mittel &lt;tibble [39 × 5]&gt;  &lt;lm&gt;    Geschlechtm   0.0563    0.0930     0.605 5.49e-  1
3 Jung   &lt;tibble [147 × 5]&gt; &lt;lm&gt;    (Intercept)   3.07      0.0376    81.6   4.49e-123
4 Jung   &lt;tibble [147 × 5]&gt; &lt;lm&gt;    Geschlechtm   0.0550    0.0598     0.919 3.60e-  1
# … with 2 more rows</code></pre>

</div>
</div>
<script data-goatcounter="https://remp.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="datatypes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"toc_depth": 3,
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
